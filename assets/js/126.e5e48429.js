(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{555:function(a,t,v){"use strict";v.r(t);var _=v(57),s=Object(_.a)({},(function(){var a=this,t=a.$createElement,v=a._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[v("h1",{attrs:{id:"plug-chain-hub-最新版本升级"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#plug-chain-hub-最新版本升级"}},[a._v("#")]),a._v(" Plug Chain Hub 最新版本升级")]),a._v(" "),v("p",[a._v("本文档描述了验证器和全节点操作员成功执行"),v("em",[a._v("升级计划")]),a._v("的步骤。由于升级导致的资产丢失，官方概不负责，请升级时备份好自己的财产。\nPlug Chain 将在区块高度 "),v("code",[a._v("3000000")]),a._v(" 停止主链运行，进行正式版本"),v("code",[a._v("v1.1.0")]),a._v("升级。")]),a._v(" "),v("p",[a._v("升级内容如下：")]),a._v(" "),v("ol",[v("li",[a._v("升级主网，修改chain-id 为 "),v("code",[a._v("plugchain_520-1")])]),a._v(" "),v("li",[a._v("修改链上币名 "),v("code",[a._v("plug")]),a._v(" 为:（链上相关币数据是精度0的数据，精度6的币名用于钱包，浏览器，外部APP应用展示）\n"),v("ul",[v("li",[a._v("精度0:  "),v("code",[a._v("uplugcn")])]),a._v(" "),v("li",[a._v("精度6:  "),v("code",[a._v("plugcn")])])])]),a._v(" "),v("li",[a._v("修改社区提案模块（gov） "),v("code",[a._v("募资")]),a._v(" 和 "),v("code",[a._v("投票期的时间")]),a._v("，整体修改为14天")]),a._v(" "),v("li",[a._v("调整最大验证者个数为"),v("code",[a._v("50")]),a._v("个")]),a._v(" "),v("li",[a._v("接入EVM模块")]),a._v(" "),v("li",[a._v("开通销毁"),v("code",[a._v("uplugcn")]),a._v("功能")]),a._v(" "),v("li",[a._v("整体调整"),v("code",[a._v("x/liquidity")]),a._v("，"),v("code",[a._v("x/prc10")]),a._v("等模块手续费参数")]),a._v(" "),v("li",[a._v("钱包支持两种密钥签名算法 "),v("code",[a._v("secp256k1")]),a._v("，"),v("code",[a._v("eth_secp256k1")])])]),a._v(" "),v("p",[a._v("注意事项：")]),a._v(" "),v("ol",[v("li",[a._v("不保留交易记录")]),a._v(" "),v("li",[a._v("保留当前块高高度，不保留原先块高数据")]),a._v(" "),v("li",[a._v("保留提案信息")]),a._v(" "),v("li",[a._v("保留liquidity项目数据，保留token数据")])]),a._v(" "),v("h1",{attrs:{id:"备份"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#备份"}},[a._v("#")]),a._v(" 备份")]),a._v(" "),v("p",[v("em",[a._v("首先需要停止节点运行")])]),a._v(" "),v("ol",[v("li",[a._v("验证者节点")])]),a._v(" "),v("ul",[v("li",[a._v("备份整个数据目录，默认 "),v("code",[a._v(".plugchain/")])]),a._v(" "),v("li",[a._v("备份 "),v("code",[a._v(".plugchain/data/priv_validator_state.json")]),a._v(" 文件，"),v("code",[a._v(".plugchain/data/")]),a._v("里面的数据就可以删除。")])]),a._v(" "),v("ol",{attrs:{start:"2"}},[v("li",[a._v("其余功能节点")])]),a._v(" "),v("ul",[v("li",[a._v("备份钱包目录")])]),a._v(" "),v("h1",{attrs:{id:"操作步骤"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[a._v("#")]),a._v(" 操作步骤")]),a._v(" "),v("ol",[v("li",[a._v("获取 "),v("code",[a._v("v1.1.0")]),a._v(" 版本的二进制文件plugchaind")])]),a._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 拉取v1.1.0版本代码 （本地可使用 `git tag` 查看下tag版本，如果有 `v1.1.0`,跳过此步骤）")]),a._v("\n"),v("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" plugchain\n"),v("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" fetch --all "),v("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" checkout v1.1.0\n"),v("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n\n")])])]),v("ol",{attrs:{start:"2"}},[v("li",[a._v("创建新的数据目录,可使用 --home 指定数据目录")])]),a._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[a._v("plugchaind init myNode --chain-id plugchain_520-1\n")])])]),v("ol",{attrs:{start:"3"}},[v("li",[a._v("下载主网公开的 "),v("code",[a._v("genesis.json")]),a._v(","),v("code",[a._v("app.toml")]),a._v(","),v("code",[a._v("config.toml")]),a._v(":")])]),a._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -o ~/.plugchain/config/genesis.json https://raw.githubusercontent.com/oracleNetworkProtocol/mainnet/main/v1/genesis.json\n"),v("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -o ~/.plugchain/config/app.toml https://raw.githubusercontent.com/oracleNetworkProtocol/mainnet/main/v1/app.toml\n"),v("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -o ~/.plugchain/config/config.toml https://raw.githubusercontent.com/oracleNetworkProtocol/mainnet/main/v1/config.toml\n")])])]),v("p",[v("em",[a._v("第四步只需要验证者节点操作，其余节点跳过")])]),a._v(" "),v("ol",{attrs:{start:"4"}},[v("li",[v("p",[a._v("验证者节点需要把 原来节点config目录的 "),v("code",[a._v("node_key.json")]),a._v(","),v("code",[a._v("priv_validator_key.json")]),a._v(" 文件覆盖到新数据目录的config里面作为识别验证者，其余节点不需要。")])]),a._v(" "),v("li",[v("p",[v("em",[a._v("根据原来节点的配置修改当下配置满足自己的需求，需要操作钱包的，需要把备份的钱包目录导入到新数据目录才可以操作。")])])]),a._v(" "),v("li",[v("p",[a._v("启动节点")])])]),a._v(" "),v("div",{staticClass:"language-bash extra-class"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[a._v("plugchaind start\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);