<!--
title:验证者
-->

# 验证器常见问题

### 什么是验证器？

Plugchain 基于 [Tendermint](https://tendermint.com/docs/introduction/what-is-tendermint.html)，它依赖一组验证器来保护网络。验证者的作用是运行一个全节点并通过广播包含由其私钥签名的加密签名的投票来参与共识。验证者在区块链中提交新区块并获得收入以换取他们的工作。他们还必须通过对提案进行投票来参与治理。验证者根据他们的总权益加权。

### 什么是质押？

Plugchain 是一个公共的权益证明 (PoS) 区块链，这意味着验证者的权重取决于作为抵押品的抵押代币 (plug) 的数量。这些插件可以由验证者直接自行委托或由其他插件持有者委托给他们。

系统中的任何用户都可以通过发送“创建验证器”交易来声明他们成为验证器的意图。从那里，他们成为验证者候选人。

验证者的权重（即投票权）决定了他们是否是活跃的验证者。最初，只有拥有最多投票权的前 100 名验证者才会成为活跃验证者。

### 什么是全节点？

全节点是一个完全验证区块链交易和区块的程序。它不同于仅处理区块头和一小部分交易的轻节点。运行全节点需要比轻节点更多的资源，但这是成为验证者所必需的。在实践中，运行全节点仅意味着以低网络延迟和无停机时间运行非妥协和最新版本的软件。

当然，即使他们不打算成为验证者，也可以并鼓励用户运行全节点。

### 什么是委托人？

委托人是不能或不想自己运行验证器的插件持有者。插件持有者可以将插件委托给验证者并作为交换获得他们的部分收入

因为他们与验证人分享收入，所以委托人也分担风险。如果验证者行为不端，他们的每个委托人将根据其委托的股份比例被部分削减。这就是为什么委托人应该在委托之前对验证人进行尽职调查，并将他们的股份分配给多个验证人。

委托人在系统中起着至关重要的作用，因为他们负责选择验证人。作为委托人不是一个被动的角色：委托人应该积极监控验证人的行为并参与治理。有关更多信息，请阅读 [委托人常见问题解答](../delegators/delegator-faq.md)。

## 成为验证者

### 如何成为验证者？

网络中的任何参与者都可以通过发送“create-validator”交易来表示他们想成为验证者，他们必须填写以下参数：

- **Validator's `PubKey`：** 与 Tendermint `PubKey` 关联的私钥用于签署 _prevotes_ 和 _precommits_。
- **验证者地址：** 应用层地址。这是用于公开识别您的验证者的地址。与此地址关联的私钥用于委托、解除绑定、领取奖励和参与治理。
- **验证者的名字(moniker)**
- **验证者的网站(website)**
- **验证者的描述**
- **details**：    验证器的（可选）详细信息                  
- **Initial commission rate**：区块奖励和向委托人收取的费用的佣金率。
- **Maximum commission**： 该验证器可以收取的最大佣金率。处理完 `create-validator` 后无法更改此参数。
- **Commission max change rate**： 验证人佣金的最大每日增量。处理完 `create-validator` 后无法更改此参数。
- **Minimum self-delegation**： 验证者需要始终绑定的最小插件数量。如果验证者的自委托权益低于此限制，则他们的整个权益池将解除绑定。

创建验证器后，插件持有者可以将插件委托给他们，从而有效地将权益添加到他们的池中。一个地址的总权益是委托人绑定的plug和自己指定的实体自己绑定的plug的组合。

在所有向自己发出信号的验证者候选人中，总权益最多的 100 名被指定为验证者。他们成为**验证者** 如果验证者的总股份低于前 100 名，那么该验证者将失去其验证者特权：他们不再参与共识并产生奖励。随着时间的推移，验证者的最大数量可能会通过链上治理提案增加。


### 有哪些不同类型的密钥？

简而言之，有两种类型的键：

- **Tendermint Key**：这是用于签署共识投票的唯一密钥。
  - 它与公钥`plugvalconspub` 相关联（使用`plugchaind tendenmint show-validator` 获取该值）
  - 在使用 plugchaind init 创建节点时生成。
- **应用程序密钥**：此密钥由`plugchaind`创建并用于签署交易。应用程序密钥与以“plugpub”为前缀的公钥和以“plug”为前缀的地址相关联。两者都源自`plugchaind keys add`生成的帐户密钥。

注意：验证器的操作员密钥直接绑定到应用程序密钥，但
仅为此目的使用保留前缀：`plugvaloper` 和 `plugvaloperpub`

### 验证器可以处于哪些不同状态？

使用 `create-validator` 交易创建验证器后，它们可以处于三种状态：

- `在验证者集中`：验证者在活跃集中并参与共识。验证者正在获得奖励，可能会因不当行为而被削减。
- `jailed`：验证器行为不端并且在监狱中，即在验证器集合之外。如果由于离线时间过长而被监禁，验证者可以发送“unjail”交易以重新进入验证者集合。如果监禁是由于双重签名，则验证者无法解除监禁。
- `unbonded`：验证者不在活动集中，因此不会签署区块。验证者不能被削减，也不会获得任何奖励。仍然可以将 plug 委托给这个验证器。从“非绑定”验证器取消委托是立即的。

### 什么是“自我授权”？我怎样才能增加我的“自我授权”？

自我委托是验证者对自己的委托。可以通过从验证者的“应用程序”应用程序密钥发送“委托”交易来增加此金额。

### 是否有最低数量的插件必须被委派为活动（=绑定）验证器？

最小值为“1 个插头”。

### 委托人将如何选择他们的验证人？

委托人可以根据自己的主观标准自由选择验证人。也就是说，预计很重要的标准包括：

- **自我委托的插件数量：**验证者自我委托给自己的插件数量。拥有更多自委托插件的验证器在游戏中拥有更多的皮肤，使他们对自己的行为更负责。
- **委托的插件数量：**委托给验证者的插件总数。高投票权表明社区信任这个验证者，但也意味着这个验证者是黑客更大的目标。更大的验证器也会降低网络的去中心化程度。
- **佣金率：** 在分配给委托人之前，验证者对收入应用的佣金。
- **跟踪记录：**委托人可能会查看他们计划委托给的验证者的跟踪记录。这包括资历、过去对提案的投票、历史平均正常运行时间以及节点被入侵的频率。

除了这些标准之外，验证者还有可能通过一个网站地址来完成他们的简历。验证者需要以一种或另一种方式建立声誉来吸引委托人。例如，让验证者的设置由第三方审计将是一个很好的做法。但请注意，Tendermint 团队不会自行批准或进行任何审核。

##职责

### 验证器需要公开识别吗？

不，他们没有。每个委托人将根据自己的标准对验证人进行评估。验证者在提名自己时将能够注册一个网站地址，以便他们可以在他们认为合适的情况下宣传他们的操作。一些委托人可能更喜欢一个网站，该网站清楚地显示运营验证人的团队及其简历，而其他人可能更喜欢具有良好记录的匿名验证人。

### 验证者的职责是什么？

验证者有两个主要职责：

- **能够持续运行正确版本的软件：**验证者需要确保他们的服务器始终在线并且他们的私钥没有被泄露。
- **积极参与治理：**验证者需要对每个提案进行投票。

此外，验证者有望成为社区的活跃成员。他们应该始终了解生态系统的当前状态，以便他们可以轻松适应任何变化。

###“参与治理”意味着什么？

Plugchain Hub 上的验证者和委托者可以对更改操作参数（例如区块 gas 限制）、协调升级或对任何给定事项做出决定的提案进行投票。

验证者在治理系统中扮演着特殊的角色。作为系统的支柱，他们必须对每个提案进行投票。这一点尤其重要，因为不投票的委托人将继承其验证人的投票。

### 质押意味着什么？

Staking plug 可以被认为是验证活动的安全押金。当验证者或委托人想要取回部分或全部存款时，他们会发送“解除绑定”交易。然后，plug 会经历 **3 周的解绑期**，在此期间，他们很可能会因验证者在解绑过程开始之前犯下的潜在不当行为而受到惩罚。

验证者和协会委托人获得区块奖励、费用，并有权参与治理。如果验证者行为不端，则其总权益的一部分将被削减。这意味着每个将插件绑定到该验证器的委托人都会按其绑定的股份比例受到惩罚。因此，委托人被激励委托给他们预期将安全运行的验证人。

### 验证者可以带着委托人的插件逃跑吗？

通过委托给验证者，用户委托投票权。验证者拥有的投票权越大，他们在共识和治理过程中的权重就越大。这并不意味着验证者可以保管其委托人的插件。 **绝不能让验证者带着委托人的资金逃跑**。

尽管委托资金不能被验证人窃取，但如果验证人行为不端，委托人仍需承担责任。

### 多久会选择一个验证者来提出下一个区块？是否随保税插头的数量而增加？

被选中提出下一个区块的验证者称为提议者。每个提议者都是确定性选择的，被选择的频率与验证者的投票权（即绑定插头的数量）成正比。例如，如果所有验证者的总抵押权益为 100 plug，而一个验证者的总权益为 10 plug，那么该验证者将提议约 10% 的区块。

### plugchain Hub 的验证者是否需要验证 plugchain 生态系统中的其他区域？

是他们会。如果治理决定如此，则可能需要插件链中心的验证器来验证插件链生态系统中的其他区域。

## 激励措施

### 质押的动机是什么？

验证者权益池的每个成员都会获得不同类型的收入：

- **区块奖励：** 验证者运行的应用程序的原生代币（例如，plugchain Hub 上的插件）被膨胀以产生区块供应。这些规定的存在是为了激励插头持有人将其股权绑定，因为非绑定插头会随着时间的推移而被稀释。
- **交易费用：** Plugchain Hub 维护一个被接受为费用支付的代币白名单。初始费用代币是`plug`。

该总收入根据每个验证者的权重在验证者的权益池中分配。然后，在每个验证者的权益池中，收入按照每个委托人的权益按比例分配给委托人。委托人收入的佣金在分配之前由验证人收取。

### 运行验证器的动机是什么？

由于佣金，验证者按比例获得比委托人更多的收入。

验证者在治理中也发挥着重要作用。如果委托人不投票，他们会从验证人那里继承投票。这赋予验证者在生态系统中的主要责任。

### 什么是验证人佣金？

验证者池收到的收入在验证者和他们的委托人之间分配。验证者可以对分配给其委托人的收入部分收取佣金。该佣金设置为百分比。每个验证者都可以自由设置他们的初始佣金、最大每日佣金变化率和最大佣金。 Plugchain Hub 强制执行每个验证器设置的参数。创建验证器后，只能更改佣金率。

### 区块奖励如何分配？

区块奖励相对于他们的投票权按比例分配给所有验证者。这意味着即使每个验证者都获得了奖励，但随着时间的推移，所有验证者都将保持相等的权重。

让我们举一个例子，我们有 10 个具有相同投票权和 1% 佣金率的验证器。我们还假设一个区块的奖励是 1000 plug，并且每个验证者都有 20% 的 self-bonded plug。这些代币不会直接交给提议者。相反，它们均匀分布在验证器中。所以现在每个验证者的池都有 100 个插头。这 100 个插头将根据每个参与者的股份分配：

- 佣金：`100*80%*1% = 0.8 插头`
- 验证者获得：`100\*20% + Commission = 20.8 plug`
- 所有委托人获得：`100\*80% - Commission = 79.2 plug`

然后，每个委托人都可以根据他们在验证人的抵押池中的股份比例要求他们在 79.2 插件中的份额。

### 费用如何分配？

费用以类似的方式分配，但区块提议者可以在他们提议的区块费用上获得奖金，如果他们包括超过严格的最低要求的预提交。

当验证者被选中提出下一个区块时，他们必须至少包含前一个区块的 2/3 预提交。但是，以奖金的形式包含超过 2/3 的预提交是有动力的。奖励是线性的：如果提议者包含 2/3 次预提交（区块有效的最小值），则为 1%，如果提议者包含 100% 预提交，则为 5%。当然，提议者不应等待太久，否则其他验证者可能会超时并转移到下一个提议者。因此，验证者必须在获得最多签名的等待时间和失去提议下一个区块的风险之间找到平衡。该机制旨在激励非空区块提议、验证者之间更好的网络以及减轻审查。

让我们举一个具体的例子来说明上述概念。在这个例子中，有 10 个验证者的权益相等。他们每个人都适用 1% 的佣金率和 20% 的自委托插头。现在来了一个成功的区块，它总共收取了 1025.51020408 个插件费用。

首先，征收 2% 的税。相应的插头进入备用池。储备池的资金可以通过治理分配来资助赏金和升级。

- `2% * 1025.51020408 = 20.51020408` 插头进入储备池。

1005 插头现在仍然存在。让我们假设提议者在其区块中包含 100% 的签名。因此，它获得了 5% 的全额奖金。

我们必须解决这个简单的等式才能找到每个验证器的奖励 R：

`9*R + R + R*5% = 1005 ⇔ R = 1005/10.05 = 100`

- 对于提议者验证者：
  - 矿池获得`R + R * 5%`：105插头
  - 佣金：`105 * 80% * 1%` = 0.84 插头
  - 验证者的奖励：`105 * 20% + Commission` = 21.84 plug
  - 委托人的奖励：`105 * 80% - 佣金` = 83.16 插件（每个委托人都可以按照他们的股份比例领取这些奖励的一部分）
- 对于每个非提议者验证者：
  - 池获得R：100插头
  - 佣金：`100 * 80% * 1%` = 0.8 插头
  - 验证者的奖励：`100 * 20% + Commission` = 20.8 plug
  - 委托人的奖励：`100 * 80% - 佣金` = 79.2 插件（每个委托人都可以按照他们的股份比例领取这些奖励的部分）

### 削减条件是什么？

如果验证者行为不端，他们的委托权益将被部分削减。目前有两个错误可能导致验证者及其委托人的资金被削减：

- **双重签名：** 如果有人在链 A 上报告说一个验证者在链 A 和链 B 上签署了两个高度相同的区块，并且如果链 A 和链 B 共享一个共同的祖先，那么这个验证者将被削减链 A 上的 5%。
- **停机时间：** 如果验证者错过了最后 10.000 个区块中的 95% 以上，他们将被削减 0.01%。

### 验证器需要自我委托插件吗？

是的，他们确实需要自我委托至少“1 个插头”。即使验证人没有义务自我委托超过“1 个插件”，委托人也应该希望他们的验证人在他们的抵押池中有更多的自我委托插件。换句话说，验证者应该在游戏中拥有皮肤。

为了让委托人对他们的验证人在游戏中拥有多少皮肤有一定的保证，后者可以发出最少量的自我委托插件信号。如果验证者的自我委托低于其预定义的限制，则该验证者及其所有委托者将解除绑定。

### 如何防止少数顶级验证者手中的股权集中？

目前，社区应该以聪明和自我保护的方式行事。当比特币中的矿池获得过多的算力时，社区通常会停止对该矿池做出贡献。 Plugchain Hub 最初将依赖相同的效果。其他机制可以尽可能地简化这个过程：

- **无惩罚重新委托：** 这是为了让委托人可以轻松地从一个验证器切换到另一个验证器，以减少验证器的粘性。
- **UI 警告：** 钱包可以实施警告，如果用户想要委托给已经拥有大量权益的验证者，这些警告将显示给用户。

＃＃ 技术要求

### 什么是硬件要求？

验证者应该期望为一个或多个数据中心位置提供冗余电源、网络、防火墙、HSM 和服务器。

我们预计最初将需要适度的硬件规格，并且随着网络使用的增加，它们可能会增加。 参与测试网是了解更多信息的最佳方式。

### 什么是软件要求？

除了运行插件链中心节点之外，验证者还应该开发监控、警报和管理解决方案。

### 带宽要求是什么？

与以太坊或比特币等链相比，plugchain 网络具有非常高的吞吐量。

我们建议数据中心节点只连接到云中可信的全节点或其他在社交上相互认识的验证器。这减轻了数据中心节点减轻拒绝服务攻击的负担。

最终，随着网络的使用越来越频繁，每天数千兆字节的带宽是非常现实的。

### 运行验证器在物流方面意味着什么？

一个成功的验证器操作需要多个高技能人员的努力和持续的操作关注。例如，这将比运行比特币矿工要复杂得多。

### 如何处理密钥管理？

验证者应该期望运行支持 ed25519 密钥的 HSM。以下是潜在的选择：

- YubiHSM 2
- 分类帐纳米 S
- 分类帐 BOLOS SGX 飞地
- 泰雷兹 nShield 支持

Tendermint 团队不推荐一种高于另一种的解决方案。鼓励社区加强努力以改进 HSM 和密钥管理的安全性。

### 验证者在操作方面可以期待什么？

运行有效操作是避免意外脱胶或被割伤的关键。这包括能够响应攻击、中断以及保持数据中心的安全性和隔离性。

### 维护要求是什么？

验证者应该期望执行定期软件更新以适应升级和错误修复。网络在引导阶段的早期不可避免地会出现问题，需要高度警惕。

### 验证者如何保护自己免受拒绝服务攻击？

当攻击者向某个 IP 地址发送大量 Internet 流量以阻止该 IP 地址上的服务器连接到 Internet 时，就会发生拒绝服务攻击。

攻击者扫描网络，试图了解各种验证器节点的 IP 地址，并通过向它们注入流量来断开它们的通信。

降低这些风险的一种推荐方法是让验证者在所谓的哨兵节点架构中仔细构建他们的网络拓扑。

验证器节点应该只连接到他们信任的全节点，因为它们自己操作或由他们在社交上认识的其他验证器运行。验证器节点通常会在数据中心内运行。大多数数据中心提供与主要云提供商网络的直接链接。验证器可以使用这些链接连接到云中的哨兵节点。这将拒绝服务的负担从验证者的节点直接转移到其哨兵节点，并且可能需要启动或激活新的哨兵节点以减轻对现有节点的攻击。

Sentry 节点可以快速启动或更改其 IP 地址。由于到哨兵节点的链接在私有 IP 空间中，基于 Internet 的攻击无法直接干扰它们。这将确保验证者区块提案和投票始终进入网络的其余部分。

预计这部分验证者的良好操作程序将完全缓解这些威胁。